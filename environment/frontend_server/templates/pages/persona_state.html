{% extends "base.html" %}
{% load static %}

{% block content %}


<h3 class="container-lg mx-auto mt-5 px-0 pt-5 pb-3">
	<a href="{{ request.META.HTTP_REFERER }}">&lt; Return to simulation</a>
</h3>


<div class="container-lg bg-body d-flex gap-5 mx-auto my-4 p-5 rounded-4">
	<div class="flex-shrink-0">
		<a href="#">
			{% with 'assets/characters/profile/'|add:persona_name_underscore|add:'.png' as image_static %}
				<img src="{% static image_static %}" style="width: 5em">
			{% endwith %}
		</a>
	</div>
	<div class="flex-shrink-1 p-0">
		<div class="row">
			<h1 class="col-md-8 mb-4 fs-2">
				{{ persona_name }}
			</h1>
		</div>
		<div>
			<h3 class="fs-3"><strong>Basic information</strong></h3>
			<table class="w-100 fs-5">
				<tr>
					<td class="fw-bolder" style="width: 20%">First name</td>
					<td>{{ scratch.first_name }}</td>
				</tr>
				<tr>
					<td class="fw-bolder">Last name</td>
					<td>{{ scratch.last_name }}</td>
				</tr>
				<tr>
					<td class="fw-bolder">Age</td>
					<td>{{ scratch.age }}</td>
				</tr>
				<tr>
					<td class="fw-bolder">Current time</td>
					<td>{{ scratch.curr_time }}</td>
				</tr>
				<tr>
					<td class="fw-bolder">Current tile</td>
					<td>{{ scratch.curr_tile }}</td>
				</tr>
			</table>

			<hr>

			<h3 class="fs-3"><strong>Settings</strong></h3>
			<table class="w-100 fs-5">
				<tr>
					<td class="fw-bolder" style="width: 20%">Vision Radius</td>
					<td>{{ scratch.vision_r }}</td>
				</tr>
				<tr>
					<td class="fw-bolder">Attention Bandwidth</td>
					<td>{{ scratch.att_bandwidth }}</td>
				</tr>
				<tr>
					<td class="fw-bolder">Retention</td>
					<td>{{ scratch.retention }}</td>
				</tr>
			</table>

			<hr>

			<h3 class="fs-3"><strong>Personality and Lifestyle</strong></h3>
			<table class="w-100 fs-5">
				<tr>
					<td class="fw-bolder">Innate tendency</td>
					<td>{{ scratch.innate }}</td>
				</tr>
				<tr>
					<td class="fw-bolder">Learned tendency</td>
					<td>{{ scratch.learned }}</td>
				</tr>
				<tr>
					<td class="fw-bolder">Currently</td>
					<td>{{ scratch.currently }}</td>
				</tr>
				<tr>
					<td class="fw-bolder">Lifestyle</td>
					<td>{{ scratch.lifestyle }}</td>
				</tr>
			</table>

			<hr>

			<h3 class="fs-3"><strong>Current Action State</strong></h3>
			<table class="w-100 fs-5">
				<tr>
					<td class="fw-bolder" style="width:20%">Daily Requirement</td>
					<td>
						<ol>
							{% for i in scratch.daily_req %}
								<li>{{ i }}</li>
							{% endfor %}
						</ol>
					</td>
				</tr>
				<tr>
					<td class="fw-bolder">Daily Schedule</td>
					<td>
						<ol>
							{% for i in scratch.f_daily_schedule %}
								<li>{{ i }}</li>
							{% endfor %}
						</ol>
					</td>
				</tr>
				<tr>
					<td class="fw-bolder">Action Address</td>
					<td>{{ scratch.act_address }}</td>
				</tr>
				<tr>
					<td class="fw-bolder">Action Start Time</td>
					<td>{{ scratch.act_start_time }}</td>
				</tr>
				<tr>
					<td class="fw-bolder">Action Duration</td>
					<td>{{ scratch.act_duration }}</td>
				</tr>
				<tr>
					<td class="fw-bolder">Action Description</td>
					<td>{{ scratch.act_description }}</td>
				</tr>
				<tr>
					<td class="fw-bolder">Action Pronunciatio</td>
					<td>{{ scratch.act_pronunciatio }}</td>
				</tr>
			</table>

			<hr>

			<h3 class="fs-3"><strong>Agent's Memory</strong></h3>
			<h4 class="fs-4"><strong>Event</strong></h4>
			<div class="w-100">
				{% for node_details in a_mem_event %}
					<p>
						<!-- <strong>Node ID: node_{{ node_details.node_count }}</strong><br> -->
						<!-- Node Count: {{ node_details.node_count }} ||  -->
						<!-- Type Count: {{ node_details.type_count }}  -->
						<!-- <br> -->
						[node_{{ node_details.node_count }}] {{ node_details.created }}: <strong>{{ node_details.description }}</strong>
						<!-- || -->
						<!-- Expiration: {{ node_details.expiration }} -->
						<!-- <br> -->
						<!-- S, P, O
							node_details.subject ,
							node_details.predicate ,
							node_details.object
							<br>
						-->
						<!-- Description: {{ node_details.description }} -->
						<!-- <br> -->
						<!-- Keywords: {{ node_details.keywords }} -->
						<!-- <br> -->
						<!-- Filling: {{ node_details.filling }} -->
					</p>
				{% endfor %}
			</div>
			<br>


			<h4 class="fs-4"><strong>Agent's Conversation History</strong></h4>
			<div class="w-100">
				{% for node_details in a_mem_chat %}
					<p>
						Created: {{ node_details.created }}
						<br>
						Description: {{ node_details.description }}
						<br>
						Filling: <br>
						{% for name, utt in node_details.filling %}
							<span style="font-style: italic;">{{ name }}</span>: {{ utt }}<br>
						{% endfor %}
					</p>
				{% endfor %}
			</div>
			<br>

			<h4 class="fs-4"><strong>Agent's Thought</strong></h4>
			<div class="w-100">
				{% for node_details in a_mem_thought %}
					<p>
						[node_{{ node_details.node_count }}] {{ node_details.created }}: <strong>{{ node_details.description }}</strong>
						<br>(Depth: {{ node_details.depth }}; Evidence: {{ node_details.filling }})
					</p>
				{% endfor %}
			</div>
			<br>
		</div>
	</div>
</div>

{% endblock %}
